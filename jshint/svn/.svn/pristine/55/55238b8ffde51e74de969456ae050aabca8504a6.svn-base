;(function(e,t){if(this[e])return;this[e]=t(),typeof define=="function"&&(define.amd||define.cmd)?define(this[e]):typeof module=="object"&&(module.exports=this[e])})("mqq",function(e){"use strict";function d(e,t){e=String(e).split("."),t=String(t).split(".");try{for(var n=0,r=Math.max(e.length,t.length);n<r;n++){var i=isFinite(e[n])&&Number(e[n])||0,s=isFinite(t[n])&&Number(t[n])||0;if(i<s)return-1;if(i>s)return 1}}catch(o){return-1}return 0}function m(e){if(t.debuging&&mqq.firebug&&mqq.firebug.log&&e.method!=="pbReport")try{mqq.firebug.log(e)}catch(n){}}function g(e,t,n,r,i){if(!e||!t||!n)return;var s=e+"://"+t+"/"+n,o,f,c,h;r=r||[];if(!i||!u[i]&&!window[i]){i=null;for(f=0,c=r.length;f<c;f++){o=r[f],typeof o=="object"&&o!==null&&(o=o.callbackName||o.callback);if(o&&(u[o]||window[o])){i=o;break}}}i&&(a[i]={ns:t,method:n,uri:s,startTime:Date.now()},h=String(i).match(/__MQQ_CALLBACK_(\d+)/),h&&(a[h[1]]=a[i])),v.send(s,l)}function y(e){var t=e.split("."),n=window;return t.forEach(function(e){!n[e]&&(n[e]={}),n=n[e]}),n}function b(e,t,n){e=typeof e=="function"?e:window[e];if(!e)return;var i=w(e),s="__MQQ_CALLBACK_"+i;return window[s]=function(){var e=r.call(arguments);E(i,e,t,n)},s}function w(e){var t=o++;return e&&(u[t]=e),t}function E(e,t,n,r){var i=typeof e=="function"?e:u[e]||window[e],s=Date.now();t=t||[],typeof i=="function"?r?setTimeout(function(){i.apply(null,t)},0):i.apply(null,t):console.log("mqqapi: not found such callback: "+e),n&&(delete u[e],delete window["__MQQ_CALLBACK_"+e]);if(a[e]){var o=a[e];delete a[e],m({ns:o.ns,method:o.method,ret:JSON.stringify(t),url:o.uri}),Number(e)&&delete a["__MQQ_CALLBACK_"+e];var f=c,l=["retCode","retcode","resultCode","ret","code","r"],h,p,d;if(t.length){h=t[0];if(typeof h=="object"&&h!==null){for(p=0,d=l.length;p<d;p++)if(l[p]in h){f=h[l[p]];break}}else/^-?\d+$/.test(String(h))&&(f=h)}v.send(o.uri+"#callback",f,s-o.startTime)}}function S(e){var n=r.call(arguments,1);t.android&&n&&n.length&&n.forEach(function(e,t){typeof e=="object"&&"r"in e&&"result"in e&&(n[t]=e.result)}),E(e,n)}function x(){}function T(e,n){var r=null,i=e.lastIndexOf("."),s=e.substring(0,i),o=e.substring(i+1),u=y(s);if(u[o]&&!t.debuging)return;n.iOS&&t.iOS?r=n.iOS:n.android&&t.android?r=n.android:n.browser&&(r=n.browser),u[o]=r||x,f[e]=n.support}function N(e){var n=f[e]||f[e.replace("qw.","mqq.").replace("qa.","mqq.")],r=t.iOS?"iOS":t.android?"android":"browser";if(!n||!n[r])return!1;var i=n[r].split("-");return i.length===1?t.compare(i[0])>-1:t.compare(i[0])>-1&&t.compare(i[1])<1}function C(n,r,i,s){m({ns:r,method:i,url:n});var o=document.createElement("iframe");o.style.cssText="display:none;width:0px;height:0px;";var u=function(){S(s,{r:-201,result:"error"})};t.iOS&&(o.onload=u,o.src=n);var a=document.body||document.documentElement;a.appendChild(o),t.android&&(o.onload=u,o.src=n);var f=t.__RETURN_VALUE;return t.__RETURN_VALUE=e,setTimeout(function(){o.parentNode.removeChild(o)},0),f}function k(e){return t.iOS?!0:t.android&&t.__supportAndroidNewJSBridge?h[e]&&t.compare(h[e])<0?!1:!0:!1}function L(n,i,s,o){if(!n||!i)return null;var u,a;s=r.call(arguments,2),o=s.length&&s[s.length-1],o&&typeof o=="function"?s.pop():typeof o=="undefined"?s.pop():o=null,a=w(o),p.indexOf(i)>-1||i==="pbReport"&&s[s.length-1]===!0?s.pop():g("jsbridge",n,i,s,a);if(t.android&&!t.__supportAndroidJSBridge)if(window[n]&&window[n][i]){var f=window[n][i].apply(window[n],s);if(!o)return f;E(a,[f])}else o&&E(a,[t.ERROR_NO_SUCH_METHOD]);else if(k(n,i)){u="jsbridge://"+encodeURIComponent(n)+"/"+encodeURIComponent(i),s.forEach(function(e,t){typeof e=="object"&&(e=JSON.stringify(e)),t===0?u+="?p=":u+="&p"+t+"=",u+=encodeURIComponent(String(e))}),i!=="pbReport"&&(u+="#"+a);var l=C(u,n,i);if(t.iOS&&l!==e&&l.result!==e){if(!o)return l.result;E(a,[l.result],!1,!0)}}else t.android&&(u="jsbridge://"+encodeURIComponent(n)+"/"+encodeURIComponent(i)+"/"+a,s.forEach(function(e){typeof e=="object"&&(e=JSON.stringify(e)),u+="/"+encodeURIComponent(String(e))}),C(u,n,i,a));return null}function A(e,t,n,i,s){if(!e||!t||!n)return null;var o=r.call(arguments),u;typeof o[o.length-1]=="function"?(s=o[o.length-1],o.pop()):s=null,o.length===4?i=o[o.length-1]:i={},s&&(i.callback_type="javascript",u=b(s),i.callback_name=u),i.src_type=i.src_type||"web",i.version||(i.version=1);var a=e+"://"+encodeURIComponent(t)+"/"+encodeURIComponent(n)+"?"+M(i);C(a,t,n),g(e,t,n,o,u)}function O(e){var t,n,r,i=e.indexOf("?"),s=e.substring(i+1).split("&"),o={};for(t=0;t<s.length;t++)i=s[t].indexOf("="),n=s[t].substring(0,i),r=s[t].substring(i+1),o[n]=decodeURIComponent(r);return o}function M(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(String(n))+"="+encodeURIComponent(String(e[n])));return t.join("&")}function _(e,t){var n=document.createElement("a");n.href=e;var r;return n.search&&(r=O(String(n.search).substring(1)),t.forEach(function(e){delete r[e]}),n.search="?"+M(r)),n.hash&&(r=O(String(n.hash).substring(1)),t.forEach(function(e){delete r[e]}),n.hash="#"+M(r)),e=n.href,n=null,e}function D(e,t){if(e==="qbrowserVisibilityChange")return document.addEventListener(e,t,!1),!0;var n="evt-"+e;return(u[n]=u[n]||[]).push(t),!0}function P(e,t){var n="evt-"+e,r=u[n],i=!1;if(!r)return!1;if(!t)return delete u[n],!0;for(var s=r.length-1;s>=0;s--)t===r[s]&&(r.splice(s,1),i=!0);return i}function H(e){var t="evt-"+e,n=u[t],i=r.call(arguments,1);n&&n.forEach(function(e){E(e,i,!1,!0)})}function B(e,n,r){var i={event:e,data:n||{},options:r||{}};t.android&&i.options.broadcast===!1&&t.compare("5.2")<=0&&(i.options.domains=["localhost"],i.options.broadcast=!0);var s="jsbridge://event/dispatchEvent?p="+encodeURIComponent(JSON.stringify(i)||"");C(s,"event","dispatchEvent"),g("jsbridge","event","dispatchEvent")}var t={},n=navigator.userAgent,r=Array.prototype.slice,i=/(iPad|iPhone|iPod).*? (IPad)?QQ\/([\d\.]+)/,s=/\bV1_AND_SQI?_([\d\.]+)(.*? QQ\/([\d\.]+))?/,o=1,u={},a={},f={},l=-1e5,c=-2e5,h={qbizApi:"5.0",pay:"999999",SetPwdJsInterface:"999999",GCApi:"999999",q_download:"999999",qqZoneAppList:"999999",qzone_app:"999999",qzone_http:"999999",qzone_imageCache:"999999",RoamMapJsPlugin:"999999"},p=["popBack","close"];t.debuging=!1,t.iOS=i.test(n),t.android=s.test(n),t.iOS&&t.android&&(t.iOS=!1),t.version="20150105004",t.QQVersion="0",t.ERROR_NO_SUCH_METHOD="no such method",t.ERROR_PERMISSION_DENIED="permission denied",!t.android&&!t.iOS&&console.log("mqqapi: not android or ios"),t.compare=function(e){return d(t.QQVersion,e)},t.android&&(t.QQVersion=function(e){return e&&(e[3]||e[1])||0}(n.match(s)),window.JsBridge||(window.JsBridge={}),window.JsBridge.callMethod=L,window.JsBridge.callback=S,window.JsBridge.compareVersion=t.compare),t.iOS&&(window.iOSQQApi=t,t.__RETURN_VALUE=e,t.QQVersion=function(e){return e&&e[3]||0}(n.match(i))),t.platform=t.iOS?"IPH":t.android?"AND":"OTH";var v=function(){function h(){var i=e;e=[],r=0;if(!i.length)return;var a={};a.appid=s,a.typeid=o,a.releaseversion=f,a.sdkversion=t.version,a.qua=c,a.frequency=u,a.t=Date.now(),a.key=["commandid","resultcode","tmcost"].join(","),i.forEach(function(e,t){a[t+1+"_1"]=e[0],a[t+1+"_2"]=e[1],a[t+1+"_3"]=e[2]}),a=new String(M(a));if(t.compare("4.6")>=0)setTimeout(function(){mqq.iOS?mqq.invoke("data","pbReport",{type:String(10004),data:a},!0):mqq.invoke("publicAccount","pbReport",String(10004),a,!0)},0);else{var l=new Image;l.onload=function(){l=null},l.src="http://wspeed.qq.com/w.cgi?"+a}r=setTimeout(h,n)}function p(t,s,o){if(s===l){s=0;var a=Math.round(Math.random()*u)%u;if(a!==1)return}e.push([t,s||0,o||0]),r||(i=Date.now(),r=setTimeout(h,n))}var e=[],n=500,r=0,i=0,s=1000218,o=1000280,u=20,a=String(t.QQVersion).split(".").slice(0,3).join("."),f=t.platform+"_MQQ_"+a,c=t.platform+t.QQVersion+"/"+t.version;return{send:p}}();return t.__androidForSamsung=/_NZ\b/.test(n),t.__supportAndroidJSBridge=t.android&&(t.compare("4.5")>-1||t.__androidForSamsung),t.__supportAndroidNewJSBridge=t.android&&t.compare("4.7.2")>-1,t.__aCallbacks=u,t.__aReports=a,t.__aSupports=f,t.__fireCallback=E,t.__reportAPI=g,t.build=T,t.support=N,t.invoke=L,t.invokeSchema=A,t.callback=b,t.execGlobalCallback=S,t.mapQuery=O,t.toQuery=M,t.removeQuery=_,t.addEventListener=D,t.removeEventListener=P,t.execEventCallback=H,t.dispatchEvent=B,t}),mqq.build("mqq.device.isMobileQQ",{iOS:function(e){var t=mqq.iOS;return e?e(t):t},android:function(e){var t=mqq.android;return e?e(t):t},browser:function(e){var t=mqq.android||mqq.iOS;return e?e(t):t},support:{iOS:"4.2",android:"4.2"}}),mqq.build("mqq.device.systemName",{iOS:function(e){return mqq.invoke("device","systemName",e)},support:{iOS:"4.5"}}),mqq.build("mqq.device.systemVersion",{iOS:function(e){return mqq.invoke("device","systemVersion",e)},support:{iOS:"4.5"}}),mqq.build("mqq.device.model",{iOS:function(e){return mqq.invoke("device","model",e)},support:{iOS:"4.5"}}),mqq.build("mqq.device.modelVersion",{iOS:function(e){return mqq.invoke("device","modelVersion",e)},support:{iOS:"4.5"}}),mqq.build("mqq.device.getDeviceInfo",{iOS:function(e){if(mqq.compare(4.7)>=0)return mqq.invoke("device","getDeviceInfo",e);var t=mqq.callback(e,!1,!0);mqq.__reportAPI("web","device","getClientInfo",null,t);var n={isMobileQQ:this.isMobileQQ(),systemName:this.systemName(),systemVersion:this.systemVersion(),model:this.model(),modelVersion:this.modelVersion()};if(typeof e!="function")return n;mqq.__fireCallback(t,[n])},android:function(e){if(mqq.compare("4.6")>=0){var t=e;e=function(e){try{e=JSON.parse(e)}catch(n){}t&&t(e)},mqq.invoke("qbizApi","getDeviceInfo",e)}else{var n=navigator.userAgent;mqq.__reportAPI("web","device","getClientInfo"),e({isMobileQQ:!0,systemName:"android",systemVersion:function(e){return e&&e[1]||0}(n.match(/\bAndroid ([\d\.]+)/i)),model:function(e){return e&&e[1]||null}(n.match(/;\s([^;]+)\s\bBuild\/\w+/i))})}},support:{iOS:"4.5",android:"4.5"}}),mqq.build("mqq.device.qqVersion",{iOS:function(e){return mqq.invoke("device","qqVersion",e)},support:{iOS:"4.5"}}),mqq.build("mqq.device.qqBuild",{iOS:function(e){return mqq.invoke("device","qqBuild",e)},support:{iOS:"4.5"}}),mqq.build("mqq.device.getClientInfo",{iOS:function(e){var t={qqVersion:this.qqVersion(),qqBuild:this.qqBuild()},n=mqq.callback(e,!1,!0);mqq.__reportAPI("web","device","getClientInfo",null,n);if(typeof e!="function")return t;mqq.__fireCallback(n,[t])},android:function(e){if(mqq.compare("4.6")>=0){var t=e;e=function(e){try{e=JSON.parse(e)}catch(n){}t&&t(e)},mqq.invoke("qbizApi","getClientInfo",e)}else mqq.__reportAPI("web","device","getClientInfo"),e({qqVersion:mqq.QQVersion,qqBuild:function(e){return e=e&&e[1]||0,e&&e.slice(e.lastIndexOf(".")+1)||0}(navigator.userAgent.match(/\bqq\/([\d\.]+)/i))})},support:{iOS:"4.5",android:"4.6"}}),mqq.build("mqq.device.getNetworkType",{iOS:function(e){var t=mqq.invoke("device","networkStatus");t=Number(t);if(typeof e!="function")return t;mqq.__fireCallback(e,[t],!1,!0)},android:function(e){mqq.compare("4.6")>=0?mqq.invoke("qbizApi","getNetworkType",e):mqq.invoke("publicAccount","getNetworkState",function(t){var n={"-1":0,0:3,1:1},r=t in n?n[t]:4;e(r)})},support:{iOS:"4.5",android:"4.6"}}),mqq.build("mqq.device.networkStatus",{iOS:mqq.device.getNetworkType,support:{iOS:"4.5"}}),mqq.build("mqq.device.networkType",{iOS:mqq.device.getNetworkType,support:{iOS:"4.5"}}),mqq.build("mqq.device.getWebViewType",{iOS:function(e){return mqq.invoke("device","webviewType",e)},android:function(e){var t=1,n=navigator.userAgent;return/\bPA\b/.test(n)?(t=5,/\bCoupon\b/.test(n)?t=2:/\bMyCoupon\b/.test(n)&&(t=3)):/\bQR\b/.test(n)&&(t=4),mqq.__reportAPI("web","device","getWebViewType"),e?e(t):t},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.device.webviewType",{iOS:mqq.device.getWebViewType,support:{iOS:"4.6"}}),mqq.build("mqq.device.connectToWiFi",{iOS:function(e,t){t&&t(mqq.ERROR_NO_SUCH_METHOD)},android:function(e,t){e.callback=mqq.callback(t),e.callback&&mqq.compare("5.1")>=0&&mqq.compare("5.4")<0&&(e.callback="javascript:"+e.callback),mqq.invoke("qbizApi","connectToWiFi",e)},support:{android:"4.7"}}),mqq.build("mqq.device.setScreenStatus",{iOS:function(e,t){e=e||{},e.callback=mqq.callback(t),mqq.invoke("device","setScreenStatus",e)},android:function(e,t){e=e||{},e.callback=mqq.callback(t),mqq.invoke("device","setScreenStatus",e)},support:{android:"5.0"}}),function(){function t(t,n){typeof t=="string"&&/^{.*?}$/.test(t)&&(t=JSON.parse(t)),t&&"radio"in t&&(t.type===1?t.radio="wifi":t.type>=2?t.radio=e[t.radio]||"unknown":t.radio="unknown"),n&&n(t)}var e={CTRadioAccessTechnologyGPRS:"gprs",CTRadioAccessTechnologyEdge:"edge",CTRadioAccessTechnologyWCDMA:"wcdma",CTRadioAccessTechnologyHSDPA:"hsdpa",CTRadioAccessTechnologyCDMA1x:"cdma",CTRadioAccessTechnologyCDMAEVDORev0:"evdo0",CTRadioAccessTechnologyCDMAEVDORevA:"evdoa",CTRadioAccessTechnologyCDMAEVDORevB:"evdob",CTRadioAccessTechnologyeHRPD:"ehrpd",CTRadioAccessTechnologyLTE:"lte",NETWORK_TYPE_GPRS:"gprs",NETWORK_TYPE_EDGE:"edge",NETWORK_TYPE_CDMA:"cdma",NETWORK_TYPE_1xRTT:"1xrtt",NETWORK_TYPE_EVDO_0:"evdo0",NETWORK_TYPE_EVDO_A:"evdoa",NETWORK_TYPE_EVDO_B:"evdob",NETWORK_TYPE_IDEN:"iden",NETWORK_TYPE_UMTS:"umts",NETWORK_TYPE_HSDPA:"hsdpa",NETWORK_TYPE_HSUPA:"hsupa",NETWORK_TYPE_HSPA:"hspa",NETWORK_TYPE_EHRPD:"ehrpd",NETWORK_TYPE_HSPAP:"hspap",NETWORK_TYPE_LTE:"lte",NETWORK_TYPE_WIFI:"wifi",NETWORK_TYPE_UNKNOWN:"unknown"};mqq.build("mqq.device.getNetworkInfo",{iOS:function(e){mqq.invoke("device","getNetworkInfo",{callback:mqq.callback(function(n){t(n,e)},!1,!0)})},android:function(e){mqq.invoke("qbizApi","getNetworkInfo",function(n){t(n,e)})},support:{iOS:"5.2",android:"5.2"}})}(),mqq.build("mqq.app.isAppInstalled",{iOS:function(e,t){return mqq.invoke("app","isInstalled",{scheme:e},t)},android:function(e,t){mqq.invoke("QQApi","isAppInstalled",e,t)},support:{iOS:"4.2",android:"4.2"}}),mqq.build("mqq.app.isAppInstalledBatch",{iOS:function(e,t){return mqq.invoke("app","batchIsInstalled",{schemes:e},t)},android:function(e,t){e=e.join("|"),mqq.invoke("QQApi","isAppInstalledBatch",e,function(e){var n=[];e=(e+"").split("|");for(var r=0;r<e.length;r++)n.push(parseInt(e[r])===1);t(n)})},support:{iOS:"4.2",android:"4.2"}}),mqq.build("mqq.app.launchApp",{iOS:function(e){mqq.invokeSchema(e.name,"app","launch",e)},android:function(e){mqq.invoke("QQApi","startAppWithPkgName",e.name)},support:{iOS:"4.2",android:"4.2"}}),mqq.build("mqq.app.downloadApp",{android:function(){var e={},t=0,n=function(n){if(t>0){var r=0,i=n.length,s,o;if(typeof n=="object"&&i)for(;r<i,s=n[r];r++)(o=e[s.appid])&&o(s);else(o=e[n.appid])&&o(n)}};return mqq.invoke("q_download","registerDownloadCallBackListener",mqq.callback(n)),function(n,r){r&&typeof r=="function"&&(t++,e[n.appid]=r),mqq.invoke("q_download","doDownloadAction",n)}}(),support:{android:"4.5"}}),mqq.build("mqq.app.launchAppWithTokens",{iOS:function(e,t){return typeof e=="object"?mqq.invoke("app","launchApp",e):mqq.invoke("app","launchApp",{appID:e,paramsStr:t})},android:function(e){mqq.compare("5.2")>=0?mqq.invoke("QQApi","launchAppWithTokens",e):mqq.compare("4.6")>=0?mqq.invoke("QQApi","launchAppWithTokens",e.appID,e.paramsStr,e.packageName,e.flags||e.falgs||0):mqq.invoke("QQApi","launchApp",e.appID,e.paramsStr,e.packageName)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.app.sendFunnyFace",{iOS:function(e){mqq.invoke("app","sendFunnyFace",e)},android:function(e){mqq.invoke("qbizApi","sendFunnyFace",e.type,e.sessionType,e.gcode,e.guin,e.faceID)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.app.checkAppInstalled",{android:function(e,t){mqq.invoke("QQApi","checkAppInstalled",e,t)},support:{android:"4.2"}}),mqq.build("mqq.app.checkAppInstalledBatch",{android:function(e,t){e=e.join("|"),mqq.invoke("QQApi","checkAppInstalledBatch",e,function(e){e=(e||"").split("|"),t(e)})},support:{android:"4.2"}}),mqq.build("mqq.ui.openUrl",{iOS:function(e){e||(e={});switch(e.target){case 0:window.open(e.url,"_self");break;case 1:e.styleCode={1:4,2:2,3:5}[e.style]||1,mqq.invoke("nav","openLinkInNewWebView",{url:e.url,options:e});break;case 2:mqq.invoke("nav","openLinkInSafari",{url:e.url})}},android:function(e){e.target===2?mqq.compare("4.6")>=0?mqq.invoke("publicAccount","openInExternalBrowser",e.url):mqq.compare("4.5")>=0&&mqq.invoke("openUrlApi","openUrl",e.url):e.target===1?(e.style||(e.style=0),mqq.compare("4.7")>=0?mqq.invoke("ui","openUrl",{url:e.url,options:e}):mqq.compare("4.6")>=0?mqq.invoke("qbizApi","openLinkInNewWebView",e.url,e.style):mqq.compare("4.5")>=0?mqq.invoke("publicAccount","openUrl",e.url):location.href=e.url):location.href=e.url},browser:function(e){e.target===2?window.open(e.url,"_blank"):location.href=e.url},support:{iOS:"4.5",android:"4.6",browser:"0"}}),function(){var e={},t={Abount:"com.tencent.mobileqq.activity.AboutActivity",GroupTribePublish:"com.tencent.mobileqq.troop.activity.TroopBarPublishActivity",GroupTribeReply:"com.tencent.mobileqq.troop.activity.TroopBarReplyActivity",GroupTribeComment:"com.tencent.mobileqq.troop.activity.TroopBarCommentActivity"};mqq.build("mqq.ui.openView",{iOS:function(t){t.name=e[t.name]||t.name,typeof t.onclose=="function"&&(t.onclose=mqq.callback(t.onclose)),mqq.invoke("nav","openViewController",t)},android:function(e){e.name=t[e.name]||e.name,typeof e.onclose=="function"&&(e.onclose=mqq.callback(e.onclose)),mqq.compare("5.0")>-1?mqq.invoke("ui","openView",e):mqq.invoke("publicAccount","open",e.name)},support:{iOS:"4.5",android:"4.6"}})}(),mqq.build("mqq.ui.popBack",{iOS:function(){mqq.invoke("nav","popBack")},android:function(){mqq.invoke("publicAccount","close")},support:{iOS:"4.5",android:"4.6"}}),mqq.build("mqq.ui.returnToAIO",{iOS:function(){mqq.invoke("nav","returnToAIO")},android:function(){mqq.invoke("qbizApi","returnToAIO")},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.ui.setActionButton",{iOS:function(e,t){typeof e!="object"&&(e={title:e});var n=mqq.callback(t,!1,!0);e.callback=n,mqq.invoke("nav","setActionButton",e)},android:function(e,t){var n=mqq.callback(t);e.hidden&&(e.title=""),mqq.compare("4.7")>=0?(e.callback=n,mqq.invoke("ui","setActionButton",e)):mqq.invoke("publicAccount","setRightButton",e.title,"",n||null)},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.ui.setTitleButtons",{iOS:function(e){var t=e.left,n=e.right;t&&(t.callback=mqq.callback(t.callback,!1,!0)),n&&(n.callback=mqq.callback(n.callback,!1,!0)),mqq.compare("5.3")>=0?mqq.invoke("ui","setTitleButtons",e):(t&&(t.title&&mqq.invoke("ui","setLeftBtnTitle",{title:t.title}),t.callback&&mqq.invoke("ui","setOnCloseHandler",t)),n&&mqq.invoke("nav","setActionButton",n))},android:function(e){var t=e.left,n=e.right;t&&(t.callback=mqq.callback(t.callback)),n&&(n.callback=mqq.callback(n.callback)),mqq.compare("5.3")>=0?mqq.invoke("ui","setTitleButtons",e):(t&&t.callback&&mqq.invoke("ui","setOnCloseHandler",t),n&&(n.hidden&&(n.title=""),mqq.compare("4.7")>=0?mqq.invoke("ui","setActionButton",n):mqq.invoke("publicAccount","setRightButton",n.title,"",n.callback)))},support:{iOS:"5.0",android:"4.6"}}),mqq.build("mqq.ui.setLoading",{iOS:function(e){e&&(e.visible===!0?mqq.invoke("nav","showLoading"):e.visible===!1&&mqq.invoke("nav","hideLoading"),e.color&&mqq.invoke("nav","setLoadingColor",{r:e.color[0],g:e.color[1],b:e.color[2]}))},android:function(e){"visible"in e&&(e.visible?mqq.invoke("publicAccount","showLoading"):mqq.invoke("publicAccount","hideLoading"))},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.ui.showDialog",{iOS:function(e,t){e&&(e.callback=mqq.callback(t,!0,!0),e.title=e.title+"",e.text=e.text+"","needOkBtn"in e||(e.needOkBtn=!0),"needCancelBtn"in e||(e.needCancelBtn=!0),e.okBtnStr=e.okBtnText,e.cancelBtnStr=e.cancelBtnText,mqq.invoke("nav","showDialog",e))},android:function(e,t){if(mqq.compare("4.8.0")>=0)e.callback=mqq.callback(t,!0),mqq.invoke("ui","showDialog",e);else{var n="",r="";t&&(n=mqq.callback(function(){t({button:0})},!0),r=mqq.callback(function(){t({button:1})},!0),n+="()",r+="()"),e.title=e.title+"",e.text=e.text+"","needOkBtn"in e||(e.needOkBtn=!0),"needCancelBtn"in e||(e.needCancelBtn=!0),mqq.invoke("publicAccount","showDialog",e.title,e.text,e.needOkBtn,e.needCancelBtn,n,r)}},support:{iOS:"4.6",android:"4.6"}}),mqq.build("mqq.ui.showOfficalAccountDetail",{iOS:function(e){var t=typeof e=="object"?e:{uin:e};mqq.invoke("nav","showOfficalAccountDetail",t)},android:function(e){mqq.compare("4.6")>=0?mqq.invoke("publicAccount","viewAccount",e.uin,e.showAIO):mqq.invoke("publicAccount","viewAccount",e.uin)},support:{iOS:"4.5",android:"4.6"}}),mqq.build("mqq.ui.showProfile",{iOS:function(e){mqq.compare("4.7")>=0?mqq.invoke("nav","showProfile",e):mqq.compare("4.6")>=0&&!e.uinType?mqq.invoke("nav","showProfile",e):(e.uinType===1&&(e.card_type="group"),mqq.invokeSchema("mqqapi","card","show_pslcard",e))},android:function(e){mqq.compare("4.7")>=0?mqq.invoke("publicAccount","showProfile",e):mqq.compare("4.6")>=0&&!e.uinType?mqq.invoke("publicAccount","showProfile",e.uin):(e.uinType===1&&(e.card_type="group"),mqq.invokeSchema("mqqapi","card","show_pslcard",e))},support:{iOS:"4.5",android:"4.5"}}),mqq.build("mqq.ui.refreshTitle",{iOS:function(){mqq.invoke("nav","refreshTitle")},support:{iOS:"4.6"}}),mqq.build("mqq.ui.showEQQ",{iOS:function(e){mqq.invoke("nav","showBusinessAccountProfile",e)},android:function(e){mqq.invoke("eqq","showEQQ",e)},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.ui.scanQRcode",{iOS:function(e,t){e=e||{},t&&(e.callback=mqq.callback(t)),mqq.invoke("ui","scanQRcode",e)},android:function(e,t){e=e||{},t&&(e.callback=mqq.callback(t)),mqq.invoke("ui","scanQRcode",e)},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.ui.showActionSheet",{iOS:function(e,t){return t&&(e.onclick=mqq.callback(t,!1,!0)),mqq.invoke("ui","showActionSheet",e)},android:function(e,t){return t&&(e.onclick=mqq.callback(t)),mqq.invoke("ui","showActionSheet",e)},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.ui.shareAudio",{iOS:function(e,t){var n=mqq.callback(t,!0);e.desc&&(e.desc=e.desc.length>50?e.desc.substring(0,50)+"...":e.desc),mqq.invoke("nav","shareAudio",{params:e,callback:n})},android:function(e,t){e.req_type=2,t&&(e.callback=mqq.callback(t,!0)),e.desc&&(e.desc=e.desc.length>50?e.desc.substring(0,50)+"...":e.desc),mqq.invoke("QQApi","shareMsg",e)},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.ui.shareMessage",{iOS:function(e,t){!("needPopBack"in e)&&"back"in e&&(e.needPopBack=e.back),e.share_url&&(e.share_url=mqq.removeQuery(e.share_url,["sid","3g_sid"])),e.desc&&(e.desc=e.desc.length>50?e.desc.substring(0,50)+"...":e.desc),e.callback=mqq.callback(t,!0,!0),mqq.invoke("nav","shareURLWebRichData",e)},android:function(e,t){e.share_url&&(e.share_url=mqq.removeQuery(e.share_url,["sid","3g_sid"])),e.callback=mqq.callback(function(e){t&&t({retCode:e?0:1})},!0),e.desc&&(e.desc=e.desc.length>50?e.desc.substring(0,50)+"...":e.desc);if(e.share_type&&(e.share_type===2||e.share_type===3)&&mqq.compare("5.2")<0&&mqq.support("mqq.app.isAppInstalled")){var n="您尚未安装微信，不可使用此功能";mqq.app.isAppInstalled("com.tencent.mm",function(t){t?mqq.invoke("QQApi","shareMsg",e):mqq.support("mqq.ui.showTips")?mqq.ui.showTips({text:n}):alert(n)})}else mqq.invoke("QQApi","shareMsg",e)},support:{iOS:"4.7.2",android:"4.7.2"}}),mqq.build("mqq.ui.shareRichMessage",{iOS:function(e,t){e.puin=e.oaUin,e.desc=e.desc||e.summary,e.share_url&&(e.share_url=mqq.removeQuery(e.share_url,["sid","3g_sid"])),e.desc&&(e.desc=e.desc.length>50?e.desc.substring(0,50)+"...":e.desc),e.callback=mqq.callback(t),mqq.invoke("nav","officalAccountShareRichMsg2QQ",e)},android:function(e,t){e.puin=e.oaUin,e.desc=e.desc||e.summary,e.desc&&(e.desc=e.desc.length>50?e.desc.substring(0,50)+"...":e.desc),mqq.compare("5.0")>=0?(e.share_url=e.share_url||e.targetUrl,e.image_url=e.image_url||e.imageUrl,e.share_url&&(e.share_url=mqq.removeQuery(e.share_url,["sid","3g_sid"])),e.callback=t?mqq.callback(function(e){t({ret:e?0:1})}):null,mqq.invoke("QQApi","shareMsg",e)):(e.targetUrl=e.targetUrl||e.share_url,e.imageUrl=e.imageUrl||e.image_url,e.targetUrl&&(e.targetUrl=mqq.removeQuery(e.targetUrl,["sid","3g_sid"])),e.callback=mqq.callback(t),mqq.invoke("publicAccount","officalAccountShareRichMsg2QQ",e))},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.data.shareRichMessage",{iOS:mqq.ui.shareRichMessage,android:mqq.ui.shareRichMessage,support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.ui.pageVisibility",{iOS:function(e){mqq.invoke("ui","pageVisibility",e)},android:function(e){mqq.invoke("ui","pageVisibility",e)},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.ui.setOnCloseHandler",{iOS:function(e){mqq.invoke("ui","setOnCloseHandler",{callback:mqq.callback(e,!1,!0)})},android:function(e){mqq.invoke("ui","setOnCloseHandler",{callback:mqq.callback(e)})},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.ui.openAIO",{iOS:function(e){mqq.invokeSchema("mqqapi","im","chat",e)},android:function(e){mqq.invokeSchema("mqqapi","im","chat",e)},support:{iOS:"4.5",android:"4.5"}}),mqq.build("mqq.ui.showTips",{iOS:function(e){mqq.invoke("ui","showTips",e)},android:function(e){mqq.invoke("ui","showTips",e)},support:{iOS:"4.7",android:"4.7"}}),mqq.build("mqq.ui.setWebViewBehavior",{iOS:function(e){mqq.invoke("ui","setWebViewBehavior",e)},android:function(e){mqq.invoke("ui","setWebViewBehavior",e)},support:{iOS:"4.7.2",android:"5.1"}}),mqq.build("mqq.ui.setOnShareHandler",{iOS:function(e){mqq.invoke("nav","addWebShareListener",{callback:mqq.callback(e,!1,!0)})},android:function(e){mqq.invoke("ui","setOnShareHandler",{callback:mqq.callback(e,!1,!0)})},support:{iOS:"4.7.2",android:"4.7.2"}}),mqq.build("mqq.ui.setPullDown",{iOS:function(e){mqq.invoke("ui","setPullDown",e)},android:function(e){mqq.invoke("ui","setPullDown",e)},support:{iOS:"5.3",android:"5.3"}}),mqq.build("mqq.ui.setRightDragToGoBackParams",{iOS:function(e){mqq.invoke("ui","setRightDragToGoBackParams",e)},support:{iOS:"5.3"}}),mqq.build("mqq.ui.showShareMenu",{iOS:function(){mqq.invoke("ui","showShareMenu")},android:function(){mqq.invoke("ui","showShareMenu")},support:{iOS:"5.2",android:"5.2"}}),mqq.build("mqq.ui.closeWebViews",{iOS:function(e){mqq.invoke("ui","closeWebViews",e||{})},android:function(e){mqq.invoke("ui","closeWebViews",e||{})},support:{iOS:"5.2",android:"5.2"}}),function(){var e=function(e){return function(t,n,r){if(r)try{e&&e(JSON.parse(r));return}catch(i){}t=Number(t);var s={resultCode:t,retmsg:"",data:{}};if(t===0){var o=n;n=mqq.mapQuery(n),n.sp_data=o,n.attach&&n.attach.indexOf("{")===0&&(n.attach=JSON.parse(n.attach)),n.time_end&&(n.pay_time=n.time_end),s.data=n}else t===1||t===-1?(s.retmsg="用户主动放弃支付",s.resultCode=-1):s.retmsg=n;e&&e(s)}};mqq.build("mqq.tenpay.pay",{iOS:function(t,n){t.order_no=t.tokenId||t.tokenID,t.app_info=t.app_info||t.appInfo,mqq.compare("4.6.2")>=0?mqq.invokeSchema("mqqapi","wallet","pay",t,e(n)):mqq.invokeSchema("mqqapiwallet","wallet","pay",t,e(n))},android:function(t,n){t.token_id=t.tokenId||t.tokenID,t.app_info=t.app_info||t.appInfo,mqq.compare("4.6.1")>=0?mqq.invoke("pay","pay",JSON.stringify(t),n):mqq.invokeSchema("mqqapi","tenpay","pay",t,e(n))},support:{iOS:"4.6.1",android:"4.6.1"}})}(),mqq.build("mqq.tenpay.openTenpayView",{iOS:function(e,t){var n=t?mqq.callback(t):null;mqq.invoke("pay","openTenpayView",{params:e,callback:n})},android:function(e,t){mqq.invoke("pay","openTenpayView",JSON.stringify(e),t)},support:{iOS:"4.6.1",android:"4.6.1"}}),mqq.build("mqq.tenpay.buyGoods",{android:function(e,t){mqq.invoke("pay","buyGoods",JSON.stringify(e),t)},support:{android:"4.6.1"}}),mqq.build("mqq.tenpay.openService",{android:function(e,t){mqq.invoke("pay","openService",JSON.stringify(e),t)},support:{android:"4.6.1"}}),mqq.build("mqq.tenpay.rechargeGameCurrency",{android:function(e,t){mqq.invoke("pay","rechargeGameCurrency",JSON.stringify(e),t)},support:{android:"4.6.1"}}),mqq.build("mqq.tenpay.rechargeQb",{iOS:function(e,t){mqq.invoke("tenpay","rechargeQb",JSON.stringify(e),t)},android:function(e,t){mqq.invoke("pay","rechargeQb",JSON.stringify(e),t)},support:{iOS:"5.4",android:"4.6.1"}}),mqq.build("mqq.tenpay.isOpenSecurityPay",{android:function(e,t){var e={};t&&(e.callback=mqq.callback(t)),mqq.invoke("qw_charge","qqpimsecure_safe_isopen_securitypay",e)},support:{android:"5.3.0"}})